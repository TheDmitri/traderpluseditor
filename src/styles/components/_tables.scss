/**
 * Material Tables and Paginators
 * ========================================================================== 
 * This file contains custom styling for Angular Material tables and paginator components,
 * including theme variants, hover states, and full MDC overrides to maintain design consistency.
 */

/* Material Table Customization
 * Provides transparent backgrounds, custom text colors, and interactive states
 * for both dark and light theme variants.
 */
.mat-mdc-table {
  background-color: transparent !important;

  .mat-mdc-header-cell {
    color: var(--brush-text-secondary) !important; // Header text uses secondary color for contrast
  }

  .mat-mdc-cell {
    color: var(--brush-text-primary) !important; // Cell content uses primary text color
  }

  // Interactive states for rows
  .mat-mdc-row {
    transition: background-color 0.2s ease;

    &:hover {
      background-color: var(--brush-hover-overlay); // Subtle highlight on hover
    }

    &.selected {
      background-color: var(--brush-selected-overlay); // Stronger highlight for selected rows
    }
  }

  // Interactive rows with pointer cursor
  .clickable-row {
    cursor: pointer;
  }

  // Light theme variant with appropriate contrast colors
  &.light-table {
    background-color: var(--color-neutral-lightest) !important;

    .mat-mdc-header-cell {
      color: var(--brush-text-secondary-on-light) !important;
    }

    .mat-mdc-cell {
      color: var(--brush-text-primary-on-light) !important;
    }
  }
}

/* Material Paginator Customization
 * ========================================================================== 
 * Complete override of Material Paginator styling to match application design system.
 * Includes customization of navigation buttons, dropdown selectors, and text elements.
 */

// Base paginator styling - transparent background with themed text
.mat-mdc-paginator {
  background: transparent !important;
  color: var(--brush-text-primary) !important;
}

// Comprehensive paginator overrides with high specificity selectors
.mat-mdc-paginator {
  background: transparent !important;

  // Text labels for page size and range indicators
  .mat-mdc-paginator-page-size-label,
  .mat-mdc-paginator-range-label {
    color: var(--brush-text-secondary) !important;
    font-size: var(--font-size-sm);
  }

  // Navigation buttons with standardized styling
  .mat-mdc-icon-button.mat-mdc-paginator-navigation-first,
  .mat-mdc-icon-button.mat-mdc-paginator-navigation-previous,
  .mat-mdc-icon-button.mat-mdc-paginator-navigation-next,
  .mat-mdc-icon-button.mat-mdc-paginator-navigation-last {
    border-radius: 4px !important;
    width: 40px !important;
    height: 40px !important;
    padding: 8px !important;
    background-color: transparent !important;

    &:hover {
      background-color: var(--brush-hover-overlay) !important;
    }

    &:active {
      background-color: var(--brush-active-overlay) !important;
    }

    &:disabled {
      color: var(--brush-button-disabled-text) !important;
      background-color: transparent !important;
    }

    // Icon color to match action buttons
    .mat-mdc-paginator-icon {
      fill: var(--brush-primary-action) !important;
    }

    // Disabled state styling
    &:disabled .mat-mdc-paginator-icon {
      fill: var(--brush-button-disabled-text) !important;
      opacity: 0.5;
    }
  }

  // Page size dropdown styling with transparent background and themed borders
  .mat-mdc-paginator-page-size-select {
    .mdc-text-field {
      background-color: transparent !important;

      // Remove field decoration
      .mdc-notched-outline__leading,
      .mdc-notched-outline__notch,
      .mdc-notched-outline__trailing {
        border-color: var(--brush-border-light) !important;
      }

      // Focused state
      &.mdc-text-field--focused {
        .mdc-notched-outline__leading,
        .mdc-notched-outline__notch,
        .mdc-notched-outline__trailing {
          border-color: var(--brush-primary-action) !important;
          border-width: 2px;
        }

        .mdc-floating-label {
          color: var(--brush-primary-action) !important;
        }
      }

      // Arrow color
      .mat-mdc-select-arrow {
        color: var(--brush-primary-action) !important;
      }

      // Text color
      .mat-mdc-select-value-text {
        color: var(--brush-text-primary) !important;
      }
    }
  }

  // Layout adjustments for paginator container
  .mat-mdc-paginator-container {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 8px 16px;

    .mat-mdc-paginator-range-actions {
      gap: 4px;
    }
  }
}

/* Dropdown Menu Styling for Paginators
 * Ensures consistent styling with the rest of the application
 */
.mat-mdc-select-panel {
  background-color: var(--brush-card-background) !important;
}

// Dropdown option styling with proper states
.cdk-overlay-pane {
  .mat-mdc-option {
    color: var(--brush-text-primary) !important;

    // Hover state
    &:hover:not(.mat-mdc-option-disabled) {
      background-color: var(--brush-hover-overlay) !important;
    }

    // Active/focused state
    &.mat-mdc-option-active {
      background-color: var(--brush-active-overlay) !important;
    }

    // Selected state
    &.mat-mdc-selected:not(.mat-mdc-option-disabled) {
      background-color: var(--brush-selected-overlay) !important;

      .mdc-list-item__primary-text {
        color: var(--brush-primary-action) !important;
      }

      // Checkmark color
      .mat-pseudo-checkbox {
        color: var(--brush-primary-action) !important;

        &::after {
          color: var(--brush-primary-action) !important;
          border-color: var (--brush-primary-action) !important;
        }
      }
    }

    // Option text
    .mdc-list-item__primary-text {
      color: var(--brush-text-primary) !important;
    }
  }
}

// Focus state overrides for form fields within paginators
.mdc-text-field--focused:not(.mdc-text-field--disabled) .mdc-floating-label {
  color: var(--brush-primary-action) !important;
}

.mdc-text-field--focused:not(.mdc-text-field--disabled)
  .mdc-notched-outline__leading,
.mdc-text-field--focused:not(.mdc-text-field--disabled)
  .mdc-notched-outline__notch,
.mdc-text-field--focused:not(.mdc-text-field--disabled)
  .mdc-notched-outline__trailing {
  border-color: var(--brush-primary-action) !important;
}

// Important overrides for MDC-specific styling
.mat-mdc-paginator {
  // Fix icon buttons within paginator that use MDC styling
  .mdc-icon-button {
    border-radius: 4px !important;
    color: var(--brush-primary-action) !important;

    &:disabled {
      color: var(--brush-button-disabled-text) !important;
    }

    &:hover:not(:disabled) {
      background-color: var(--brush-hover-overlay) !important;
    }
  }
}

// Fix for ripple effects in paginator elements
.mat-mdc-paginator .mat-ripple-element {
  background-color: var(--brush-ripple-color) !important;
}

// Fix for dropdown option ripples
.mat-mdc-option .mat-ripple-element {
  background-color: var(--brush-ripple-color) !important;
}

// Fix for general MDC form issues
.mdc-line-ripple,
.mdc-line-ripple::before,
.mdc-line-ripple::after {
  border-bottom-color: var(--brush-border-light) !important;
}

.mdc-line-ripple--active::after,
.mdc-line-ripple--active::before {
  border-bottom-color: var(--brush-primary-action) !important;
}

/* Light Theme Overrides
 * Special styling for paginator when used in light mode contexts
 */
.light-theme .mat-mdc-paginator {
  color: var(--brush-text-primary-on-light) !important;

  ::ng-deep {
    .mat-mdc-paginator-page-size-label,
    .mat-mdc-paginator-range-label {
      color: var(--brush-text-secondary-on-light) !important;
    }

    .mat-mdc-icon-button:hover:not(:disabled) {
      background-color: var(--brush-hover-overlay-light) !important;
    }

    .mat-mdc-icon-button:active:not(:disabled) {
      background-color: var(--brush-active-overlay-light) !important;
    }
  }
}
