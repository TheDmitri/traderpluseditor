<div class="categories-panel-content">
  <!-- Warning about unknown categories -->
  <div *ngIf="getUnknownCategoryIds().length > 0" class="unknown-categories-warning">
    <mat-icon class="warning-icon">warning</mat-icon>
    <div class="warning-message">
      <p>This trader has {{ getUnknownCategoryIds().length }} unknown {{ getUnknownCategoryIds().length === 1 ? 'category' : 'categories' }} that {{ getUnknownCategoryIds().length === 1 ? 'does' : 'do' }} not exist in the Category Editor.</p>
      <p>These categories may not work correctly in-game.</p>
    </div>
  </div>
  
  <!-- No categories available message -->
  <div *ngIf="getAvailableCategories().length === 0 && getUnknownCategoryIds().length === 0" class="empty-categories">
    <mat-icon class="empty-icon">warning</mat-icon>
    <p class="empty-message">No categories are available. Create categories in the Category Editor first.</p>
  </div>
  
  <!-- Categories list -->
  <div *ngIf="getAvailableCategories().length > 0 || getUnknownCategoryIds().length > 0" class="categories-selection">
    <!-- Selected categories summary -->
    <div class="selected-summary">
      <span class="selected-count">{{ getSelectedCategoryIds().length }} {{ getUnknownCategoryIds().length > 0 ? 'total' : 'of ' + getAvailableCategories().length }} selected</span>
      <span *ngIf="getUnknownCategoryIds().length > 0" class="unknown-count">(including {{ getUnknownCategoryIds().length }} unknown)</span>
    </div>
    
    <!-- List of categories with checkboxes - starting with unknown categories -->
    <div class="categories-list">
      <!-- Unknown categories -->
      <mat-checkbox 
        *ngFor="let category of getUnknownCategoriesForDisplay()"
        color="warn"
        [checked]="isCategorySelected(category.categoryId)"
        (change)="toggleCategory(category.categoryId)"
        class="category-checkbox unknown-category"
      >
        <div class="category-info">
          <span class="category-id">{{ category.categoryId }}</span>
          <mat-icon class="unknown-icon" matTooltip="This category does not exist in the Category Editor">help_outline</mat-icon>
        </div>
      </mat-checkbox>
      
      <!-- Known categories -->
      <mat-checkbox 
        color="primary"
        *ngFor="let category of getSortedCategories()"
        [checked]="isCategorySelected(category.categoryId)"
        (change)="toggleCategory(category.categoryId)"
        class="category-checkbox"
        [ngClass]="{'selected-category': isCategorySelected(category.categoryId)}"
      >
        <div class="category-info">
          <span class="category-name">{{ category.categoryName }}</span>
          <span class="category-id">{{ category.categoryId }}</span>
        </div>
      </mat-checkbox>
    </div>
  </div>
</div>
